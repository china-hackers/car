{"version":3,"sources":["webpack:///src/pages/business/edit/images.vue","webpack:///./src/pages/business/edit/images.vue?b6f0","webpack:///./src/pages/business/edit/images.vue"],"names":["edit_images","mixins","data","guide","list","methods","onRead","file","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","param","config","_ref","wrap","_context","prev","next","console","log","loading","show","FormData","append","$route","query","id","headers","Content-Type","$http","post","sent","push","img","t0","clear","stop","delItem","item","index","_this2","_callee2","_context2","confirm","img_id","success","splice","preview","ImagePreview","images","map","startPosition","hideGuide","created","_this3","_callee3","_ref2","_context3","business_edit_images","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","right-icon","on","right-click","$event","_l","directives","name","rawName","value","expression","arg","click","stopPropagation","preventDefault","after-read","size","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"js/20.7a526fea28194993ec04.js","sourcesContent":["<template lang=\"pug\">\n.page\n    my-nav-bar(title=\"车辆图片\" right-icon=\"info-o\" @right-click=\"guide=true\")\n    .wrap\n        .item.bg(v-for=\"(item, index) in list\" @click=\"preview(index)\" v-lazy:background-image=\"item.img\")\n            van-icon.icon(name=\"close\" @click.stop.prevent=\"delItem(item, index)\")\n        van-uploader(:after-read=\"onRead\")\n            .item.upload\n                van-icon(name=\"photograph\" size=\"2rem\")\n    .guide(v-if=\"guide\" @click=\"hideGuide\")\n        .img.bg\n        van-icon.close(name=\"close\")\n</template>\n\n<script>\nimport carEditMixin from '../mixins/carEdit';\nexport default {\n    mixins: [carEditMixin],\n    data () {\n        return {\n            guide: true,\n            list: []\n        };\n    },\n    methods: {\n        async onRead (file) {\n            console.log(file);\n            try {\n                this.loading.show('上传中...');\n                let param = new FormData(); // 创建form对象\n                param.append('UploadModel[images][]', file.file);// 通过append向form对象添加数据\n                param.append('id', this.$route.query.id);\n                let config = {\n                    headers: {'Content-Type': 'multipart/form-data'}\n                }; // 添加请求头\n                let { data } = await this.$http.post('/admin/site/productimg', param, config);\n                console.log(data);\n                this.list.push({\n                    id: data[0][0],\n                    img: data[0][1]\n                });\n            } catch (error) {\n                console.log(error);\n            }\n            this.loading.clear();\n        },\n        async delItem (item, index) {\n            try {\n                await this.confirm('确认删除？');\n                await this.$http.post('/mobile/product/imgdelete', {\n                    img_id: item.id\n                });\n                this.success('删除成功');\n                this.list.splice(index, 1);\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        preview (index) {\n            this.ImagePreview({\n                images: this.list.map(item => item.img),\n                startPosition: index\n            });\n        },\n        hideGuide () {\n            this.guide = false;\n        }\n    },\n    async created () {\n        try {\n            let { data } = await this.$http.post('/mobile/product/img', {\n                id: this.$route.query.id\n            });\n            this.list = data.list;\n        } catch (error) {\n            console.log(error);\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.page {\n    .guide {\n        position: fixed;\n        flex-wrap: wrap;\n        flex-direction: column;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        left: 0;\n        right: 0;\n        top: 46px;\n        bottom: 0;\n        background-color: rgba(0, 0, 0, 0.5);\n        .img {\n            width: 20rem;\n            height: 27.4rem;\n            background-image: url(../../../assets/img_guide.jpeg);\n        }\n        .close {\n            color: #fff;\n            font-size: 2rem;\n            margin-top: 1rem;\n        }\n    }\n    .wrap {\n        display: flex;\n        flex-wrap: wrap;\n        .item {\n            width: 7rem;\n            height: 7rem;\n            margin: 1rem 0 0 1rem;\n            background-color: #ccc;\n            position: relative;\n            .icon {\n                position: absolute;\n                right: 0.2rem;\n                top: 0.2rem;\n                color: #f04c03;\n            }\n            &.upload {\n                color: #fff;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            }\n        }\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/business/edit/images.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[_c('my-nav-bar',{attrs:{\"title\":\"车辆图片\",\"right-icon\":\"info-o\"},on:{\"right-click\":function($event){_vm.guide=true}}}),_c('div',{staticClass:\"wrap\"},[_vm._l((_vm.list),function(item,index){return _c('div',{directives:[{name:\"lazy\",rawName:\"v-lazy:background-image\",value:(item.img),expression:\"item.img\",arg:\"background-image\"}],staticClass:\"item bg\",on:{\"click\":function($event){_vm.preview(index)}}},[_c('van-icon',{staticClass:\"icon\",attrs:{\"name\":\"close\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.delItem(item, index)}}})],1)}),_c('van-uploader',{attrs:{\"after-read\":_vm.onRead}},[_c('div',{staticClass:\"item upload\"},[_c('van-icon',{attrs:{\"name\":\"photograph\",\"size\":\"2rem\"}})],1)])],2),(_vm.guide)?_c('div',{staticClass:\"guide\",on:{\"click\":_vm.hideGuide}},[_c('div',{staticClass:\"img bg\"}),_c('van-icon',{staticClass:\"close\",attrs:{\"name\":\"close\"}})],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-189f0caa\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.vue-loader@13.7.3@vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/.vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/business/edit/images.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/.extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/.vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-189f0caa\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/.vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./images.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/.vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/.vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./images.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/.vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./images.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/.vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-189f0caa\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/.vue-loader@13.7.3@vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../../node_modules/.vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./images.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-189f0caa\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/business/edit/images.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}