{"version":3,"sources":["webpack:///src/pages/business/edit/images.vue","webpack:///./src/pages/business/edit/images.vue?81b0","webpack:///./src/pages/business/edit/images.vue"],"names":["edit_images","mixins","data","guide","list","methods","onRead","files","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","param","config","_ref","wrap","_context","prev","next","loading","show","FormData","length","forEach","file","append","$route","query","id","headers","Content-Type","$http","post","sent","item","push","img","t0","console","log","clear","stop","delItem","index","_this2","_callee2","_context2","confirm","img_id","success","splice","preview","ImagePreview","images","map","startPosition","hideGuide","created","_this3","_callee3","_ref2","_context3","business_edit_images","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","right-icon","on","right-click","$event","_l","directives","name","rawName","value","expression","arg","click","stopPropagation","preventDefault","after-read","multiple","size","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"js/18.a5c55629166544b5d3b2.js","sourcesContent":["<template lang=\"pug\">\n.page\n    my-nav-bar(title=\"车辆图片\" right-icon=\"info-o\" @right-click=\"guide=true\")\n    .wrap\n        .item.bg(v-for=\"(item, index) in list\" @click=\"preview(index)\" v-lazy:background-image=\"item.img\")\n            van-icon.icon(name=\"close\" @click.stop.prevent=\"delItem(item, index)\")\n        van-uploader(:after-read=\"onRead\" multiple)\n            .item.upload\n                van-icon(name=\"photograph\" size=\"2rem\")\n    .guide(v-if=\"guide\" @click=\"hideGuide\")\n        .img.bg\n        van-icon.close(name=\"close\")\n</template>\n\n<script>\nimport carEditMixin from '../mixins/carEdit';\nexport default {\n    mixins: [carEditMixin],\n    data () {\n        return {\n            guide: true,\n            list: []\n        };\n    },\n    methods: {\n        async onRead (files) {\n            try {\n                this.loading.show('上传中...');\n                let param = new FormData(); // 创建form对象\n                if (files.length) {\n                    files.forEach(file => {\n                        param.append('UploadModel[images][]', file.file);\n                    });\n                } else {\n                    param.append('UploadModel[images][]', files.file);\n                }\n                // 通过append向form对象添加数据\n                param.append('id', this.$route.query.id);\n                let config = {\n                    headers: {'Content-Type': 'multipart/form-data'}\n                }; // 添加请求头\n                let { data } = await this.$http.post('/admin/site/productimg', param, config);\n                data.forEach(item => {\n                    this.list.push({\n                        id: item[0],\n                        img: item[1]\n                    });\n                });\n            } catch (error) {\n                console.log(error);\n            }\n            this.loading.clear();\n        },\n        async delItem (item, index) {\n            try {\n                await this.confirm('确认删除？');\n                await this.$http.post('/mobile/product/imgdelete', {\n                    img_id: item.id\n                });\n                this.success('删除成功');\n                this.list.splice(index, 1);\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        preview (index) {\n            this.ImagePreview({\n                images: this.list.map(item => item.img),\n                startPosition: index\n            });\n        },\n        hideGuide () {\n            this.guide = false;\n        }\n    },\n    async created () {\n        try {\n            let { data } = await this.$http.post('/mobile/product/img', {\n                id: this.$route.query.id\n            });\n            this.list = data.list;\n        } catch (error) {\n            console.log(error);\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.page {\n    .guide {\n        position: fixed;\n        flex-wrap: wrap;\n        flex-direction: column;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        left: 0;\n        right: 0;\n        top: 46px;\n        bottom: 0;\n        background-color: rgba(0, 0, 0, 0.5);\n        .img {\n            width: 20rem;\n            height: 27.4rem;\n            background-image: url(../../../assets/img_guide.jpeg);\n        }\n        .close {\n            color: #fff;\n            font-size: 2rem;\n            margin-top: 1rem;\n        }\n    }\n    .wrap {\n        display: flex;\n        flex-wrap: wrap;\n        .item {\n            width: 7rem;\n            height: 7rem;\n            margin: 1rem 0 0 1rem;\n            background-color: #ccc;\n            position: relative;\n            .icon {\n                position: absolute;\n                right: 0.2rem;\n                top: 0.2rem;\n                color: #f04c03;\n            }\n            &.upload {\n                color: #fff;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            }\n        }\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/business/edit/images.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[_c('my-nav-bar',{attrs:{\"title\":\"车辆图片\",\"right-icon\":\"info-o\"},on:{\"right-click\":function($event){_vm.guide=true}}}),_c('div',{staticClass:\"wrap\"},[_vm._l((_vm.list),function(item,index){return _c('div',{directives:[{name:\"lazy\",rawName:\"v-lazy:background-image\",value:(item.img),expression:\"item.img\",arg:\"background-image\"}],staticClass:\"item bg\",on:{\"click\":function($event){_vm.preview(index)}}},[_c('van-icon',{staticClass:\"icon\",attrs:{\"name\":\"close\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.delItem(item, index)}}})],1)}),_c('van-uploader',{attrs:{\"after-read\":_vm.onRead,\"multiple\":\"multiple\"}},[_c('div',{staticClass:\"item upload\"},[_c('van-icon',{attrs:{\"name\":\"photograph\",\"size\":\"2rem\"}})],1)])],2),(_vm.guide)?_c('div',{staticClass:\"guide\",on:{\"click\":_vm.hideGuide}},[_c('div',{staticClass:\"img bg\"}),_c('van-icon',{staticClass:\"close\",attrs:{\"name\":\"close\"}})],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-3847a3ea\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/business/edit/images.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3847a3ea\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./images.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./images.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./images.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3847a3ea\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./images.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3847a3ea\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/business/edit/images.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}