{"version":3,"sources":["webpack:///src/pages/business/cars.vue","webpack:///./src/pages/business/cars.vue?0048","webpack:///./src/pages/business/cars.vue"],"names":["cars","data","active","loading","finished","curPage","list","watch","v","this","research","computed","rightWidth","0","1","2","methods","jump","path","item","state","fail","$router","push","query","id","xiajia","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","confirm","$http","post","success","t0","console","log","stop","del","index","_this2","_callee2","_context2","onLoad","_this3","_callee3","_ref","_context3","p","sent","concat","length","total","business_cars","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","model","value","callback","$$v","expression","offset","on","load","_l","key","right-width","directives","name","rawName","arg","_v","_s","brand","price","slot","click","$event","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"js/2.c20d951a3c107d0ef974.js","sourcesContent":["<template lang=\"pug\">\n.page\n    my-nav-bar(title=\"车辆管理\")\n    van-tabs(v-model=\"active\")\n        van-tab(title=\"在售\")\n        van-tab(title=\"下架\")\n        van-tab(title=\"已售\")\n    van-list.list(:loading=\"loading\" :finished=\"finished\" @load=\"onLoad\" :offset=\"600\")\n        van-swipe-cell.item(v-for=\"(item, index) in list\" :key=\"item.id\" :right-width=\"rightWidth\")\n            .cell.flex\n                .cover.bg(v-lazy:background-image=\"item.img\")\n                .info\n                    .title {{item.title}}\n                    .bottom.flex\n                        .type {{item.brand}}\n                        .price {{item.price}}万\n            .btns(slot=\"right\" v-if=\"active==0\")\n                span.btn.green(@click=\"xiajia(item)\") 下架\n                span.btn.blue(@click=\"jump('/business/edit', item)\") 编辑\n            .btns(slot=\"right\" v-if=\"active==1\")\n                span.btn.blue(@click=\"jump('/business/edit', item)\") 编辑\n                //- span.btn.red(@click=\"del(item, index)\") 删除\n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            active: 0,\n            loading: false,\n            finished: false,\n            curPage: 1,\n            list: []\n        };\n    },\n    watch: {\n        active(v) {\n            this.active = v;\n            this.research();\n        }\n    },\n    computed: {\n        rightWidth() {\n            return {\n                0: 120,\n                1: 60,\n                2: 0\n            }[this.active];\n        }\n    },\n    methods: {\n        jump(path, item) {\n            if (item.state === 2) {\n                this.fail('已出售车辆无法修改');\n                return false;\n            }\n            this.$router.push({\n                path,\n                query: {\n                    id: item.id\n                }\n            });\n        },\n        async xiajia(item) {\n            try {\n                await this.confirm('确认下架吗？');\n                await this.$http.post('/mobile/business/productclose', {\n                    id: item.id\n                });\n                this.success('下架成功');\n                this.research();\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        async del(item, index) {\n            try {\n                await this.confirm('确认删除吗？');\n                await this.$http.post('/mobile/business/productdelete', {\n                    id: item.id\n                });\n                this.success(' 删除成功');\n                this.research();\n            } catch (error) {\n                console.log(error);\n            }\n        },\n        research() {\n            this.finished = false;\n            this.list = [];\n            this.curPage = 1;\n            this.loading = false;\n        },\n        async onLoad() {\n            if (!this.loading) {\n                this.loading = true;\n                try {\n                    let { data } = await this.$http.post(\n                        '/mobile/business/productlist',\n                        {\n                            p: this.curPage,\n                            state: this.active\n                        }\n                    );\n                    console.log(data);\n                    this.list = this.list.concat(data.list);\n                    if (this.list.length >= data.total) {\n                        this.finished = true;\n                    }\n                    this.curPage += 1;\n                } catch (error) {\n                    this.finished = true;\n                    console.log(error);\n                }\n                this.loading = false;\n            }\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.page {\n    .list {\n        .item {\n            border-bottom: 1px solid #f5f5f5;\n            .cell {\n                padding: 0.7rem 1rem;\n                align-items: flex-start;\n                .cover {\n                    width: 6rem;\n                    height: 4rem;\n                    margin: 0 auto;\n                    box-shadow: 0 0 5px #ccc;\n                    flex-shrink: 0;\n                    margin: 0 1rem 0 0;\n                }\n                .info {\n                    flex-grow: 1;\n                    .tag {\n                        margin-top: 0.4rem;\n                    }\n                    .bottom {\n                        padding-top: 0.4rem;\n                        color: #999;\n                        justify-content: space-between;\n                        .price {\n                            color: #f04c03;\n                        }\n                    }\n                }\n            }\n            .btns {\n                width: 120px;\n                height: 100%;\n                display: flex;\n                align-items: stretch;\n                .btn {\n                    display: block;\n                    width: 60px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    color: #fff;\n                    &.green {\n                        background-color: rgb(37, 155, 36);\n                    }\n                    &.blue {\n                        background-color: rgb(65, 141, 255);\n                    }\n                    &.red {\n                        background-color: rgb(255, 84, 84);\n                    }\n                }\n            }\n        }\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/business/cars.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[_c('my-nav-bar',{attrs:{\"title\":\"车辆管理\"}}),_c('van-tabs',{model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},[_c('van-tab',{attrs:{\"title\":\"在售\"}}),_c('van-tab',{attrs:{\"title\":\"下架\"}}),_c('van-tab',{attrs:{\"title\":\"已售\"}})],1),_c('van-list',{staticClass:\"list\",attrs:{\"loading\":_vm.loading,\"finished\":_vm.finished,\"offset\":600},on:{\"load\":_vm.onLoad}},_vm._l((_vm.list),function(item,index){return _c('van-swipe-cell',{key:item.id,staticClass:\"item\",attrs:{\"right-width\":_vm.rightWidth}},[_c('div',{staticClass:\"cell flex\"},[_c('div',{directives:[{name:\"lazy\",rawName:\"v-lazy:background-image\",value:(item.img),expression:\"item.img\",arg:\"background-image\"}],staticClass:\"cover bg\"}),_c('div',{staticClass:\"info\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),_c('div',{staticClass:\"bottom flex\"},[_c('div',{staticClass:\"type\"},[_vm._v(_vm._s(item.brand))]),_c('div',{staticClass:\"price\"},[_vm._v(_vm._s(item.price)+\"万\")])])])]),(_vm.active==0)?_c('div',{staticClass:\"btns\",attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('span',{staticClass:\"btn green\",on:{\"click\":function($event){_vm.xiajia(item)}}},[_vm._v(\"下架\")]),_c('span',{staticClass:\"btn blue\",on:{\"click\":function($event){_vm.jump('/business/edit', item)}}},[_vm._v(\"编辑\")])]):_vm._e(),(_vm.active==1)?_c('div',{staticClass:\"btns\",attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('span',{staticClass:\"btn blue\",on:{\"click\":function($event){_vm.jump('/business/edit', item)}}},[_vm._v(\"编辑\")])]):_vm._e()])}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-3c81a8d1\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/business/cars.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3c81a8d1\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./cars.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./cars.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./cars.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3c81a8d1\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./cars.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3c81a8d1\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/business/cars.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}