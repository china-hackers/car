webpackJsonp([15],{"94Ro":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("lC5x"),r=a.n(n),i=a("J0Oq"),o=a.n(i),l=a("0wMN"),c=a("CPGk"),s={mixins:[l.a],data:function(){return{list:[],name:"",loading:!1}},methods:{getState:function(t){return{0:"已上架",1:"已下架",2:"已售"}},jumpToCarDetail:function(t){this.$router.push({path:"/car/edit",query:{id:t.pid}})},viewNotes:function(t){var e=this.$refs["my-note-editor"];e.setId(t.id),e.open()},research:function(){this.pagination.curPage=1,this.list=[],this.getList()},getList:function(){var t=this;return o()(r.a.mark(function e(){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.post("/admin/finance/buylist",{p:t.pagination.curPage,name:t.name});case 3:a=e.sent,n=a.data,t.list=n.data.list,t.pagination.pageTotal=n.data.total,t.$store.commit("UPDATE_ORIGIN_BUY"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}},e,t,[[0,10]])}))()},formatDate:function(t){return Object(c.a)(t)},deal:function(t){var e=this;return o()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$confirm("确认提交");case 3:return a.next=5,e.$http.post("/admin/finance/buycheck",{id:t.id});case 5:e.success("提交成功"),e.getList(),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}},a,e,[[0,9]])}))()},appoint:function(t){var e=this;return o()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$http.post("/admin/finance/saler2user",{id:t.id});case 3:e.success("分配成功"),e.getList(),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,e,[[0,7]])}))()}},created:function(){this.getList()}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-car-rent"},[a("my-page-title",{attrs:{title:"I品车订单"}}),a("div",{staticClass:"bar"},[a("el-form",{attrs:{inline:!0},nativeOn:{click:function(t){t.preventDefault()}}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入搜索信息"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("el-form-item",[a("my-button",{attrs:{type:"primary",loading:t.loading,click:t.research}},[t._v("搜索")])],1)],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"border"}},[a("el-table-column",{attrs:{align:"center",type:"index"}}),a("el-table-column",{attrs:{align:"center",label:"意向车辆",prop:"product_name"}}),a("el-table-column",{attrs:{align:"center",label:"姓名",prop:"name"}}),a("el-table-column",{attrs:{align:"center",label:"电话",prop:"phone"}}),a("el-table-column",{attrs:{align:"center",label:"填表时间",prop:"created"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.formatDate(new Date(1e3*e.row.created))))]}}])}),a("el-table-column",{attrs:{align:"center",label:"指定销售",prop:"saler_name"}}),a("el-table-column",{attrs:{align:"center",label:"是否成交",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(1===e.row.is_deal?"已成交":"未成交"))]}}])}),a("el-table-column",{attrs:{align:"center",label:"成交车辆",prop:"product2_name"}}),a("el-table-column",{attrs:{align:"center",label:"成交金额",prop:"price"}}),a("el-table-column",{attrs:{align:"center",label:"操作",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.viewNotes(e.row)}}},[t._v("备注")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){t.jumpToCarDetail(e.row)}}},[t._v("车辆信息")]),1!==e.row.is_deal?a("el-button",{attrs:{type:"text"},on:{click:function(a){t.appoint(e.row)}}},[t._v("分配销售")]):t._e()]}}])})],1),a("div",{staticClass:"pager"},[a("el-pagination",{attrs:{"page-sizes":[20],layout:"total,slot,prev,pager,next","current-page":t.pagination.curPage,"page-size":t.pagination.pageSize,total:t.pagination.pageTotal},on:{"update:currentPage":function(e){t.$set(t.pagination,"curPage",e)},"current-change":t.pageCurPageChange,"size-change":t.pageSizeChange}})],1)],1),a("my-note-editor",{ref:"my-note-editor",attrs:{"list-url":"/mobile/finance/buylogs","add-url":"/admin/finance/buylog","post-key":"bid"}})],1)},staticRenderFns:[]};var p=a("C7Lr")(s,u,!1,function(t){a("WyyX")},"data-v-2ca331d1",null);e.default=p.exports},WyyX:function(t,e){}});
//# sourceMappingURL=15.a0bf502c4254c7b9422b.js.map