webpackJsonp([10],{"+0Pv":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("lC5x"),a=n.n(r),i=n("J0Oq"),s=n.n(i),o=n("4YfN"),l=n.n(o),c=n("aA9S"),u=n.n(c),p={mixins:[n("Quz9").a],data:function(){return{form:{id:"",title:"",route:"",icon:"",pid:0,orders:0,is_menu:0},parentList:[],saveing:!1}},methods:{setDefaultValues:function(){var e=this;return s()(a.a.mark(function t(){var n,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("edit"!==e.type){t.next=14;break}return t.prev=1,t.next=4,e.$http.post("/admin/permission/permission",{id:e.form.id});case 4:n=t.sent,r=n.data,u()(e.form,r.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:t.next=15;break;case 14:u()(e.form,{id:"",title:"",route:"",icon:"",pid:0,orders:0,is_menu:0});case 15:case"end":return t.stop()}},t,e,[[1,9]])}))()},getParentList:function(){var e=this;return s()(a.a.mark(function t(){var n,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("/admin/permission/parentlist",{p:1});case 3:n=t.sent,r=n.data,e.parentList=r.data.list,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,e,[[0,8]])}))()},save:function(){var e=this;return s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"new"!==e.type){t.next=7;break}return t.next=4,e.$http.post("/admin/permission/add",l()({},e.form));case 4:e.success("添加成功"),t.next=10;break;case 7:return t.next=9,e.$http.post("/admin/permission/edit",l()({},e.form));case 9:e.success("修改成功");case 10:e.$emit("save-success"),e.close(),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0);case 17:case"end":return t.stop()}},t,e,[[0,14]])}))()}},mounted:function(){this.getParentList()}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"新增权限",visible:e.visible,width:"800px"},on:{"update:visible":function(t){e.visible=t}}},[n("div",{staticClass:"comp-employee-editor"},[n("el-form",{attrs:{"label-width":"120px","label-position":"left"}},[n("el-form-item",{attrs:{label:"权限名"}},[n("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),n("el-form-item",{attrs:{label:"父级"}},[n("el-select",{staticClass:"form-item-1",model:{value:e.form.pid,callback:function(t){e.$set(e.form,"pid",t)},expression:"form.pid"}},[n("el-option",{attrs:{label:"无",value:0}}),e._l(e.parentList,function(e){return n("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})],2)],1),n("el-form-item",{attrs:{label:"路由地址"}},[n("el-input",{model:{value:e.form.route,callback:function(t){e.$set(e.form,"route",t)},expression:"form.route"}})],1),n("el-form-item",{attrs:{label:"icon的class"}},[n("el-input",{model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}})],1),n("el-form-item",{attrs:{label:"菜单排序"}},[n("el-input-number",{attrs:{min:0,precision:0,step:1},model:{value:e.form.orders,callback:function(t){e.$set(e.form,"orders",t)},expression:"form.orders"}})],1),n("el-form-item",{attrs:{label:"是否为菜单"}},[n("el-radio-group",{model:{value:e.form.is_menu,callback:function(t){e.$set(e.form,"is_menu",t)},expression:"form.is_menu"}},[n("el-radio",{attrs:{label:1}},[e._v("是")]),n("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),n("el-form-item",{attrs:{label:""}},[n("my-button",{attrs:{click:e.save}},[e._v("保存")])],1)],1)],1)])},staticRenderFns:[]};var d=n("C7Lr")(p,m,!1,function(e){n("BdUq")},"data-v-95933cd2",null).exports,f={mixins:[n("0wMN").a],data:function(){return{list:[{}],loading:!1}},components:{"my-permission-editor":d},methods:{addPermission:function(){var e=this.$refs["my-permission-editor"];e.setEditorType("new"),e.open()},req:function(){var e=this;return s()(a.a.mark(function t(){var n,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("/admin/permission/list",{p:e.pagination.curPage});case 3:n=t.sent,r=n.data,e.list=r.data.list,e.pagination.pageTotal=r.data.total,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}},t,e,[[0,9]])}))()},edit:function(e){var t=this.$refs["my-permission-editor"];t.setId(e.id),t.open()},deletePermission:function(e){var t=this;return s()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$http.post("/admin/permission/delete",{id:e.id});case 3:t.success("删除成功"),t.req(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}},n,t,[[0,7]])}))()}},mounted:function(){this.req()}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-permission"},[n("my-page-title",{attrs:{title:"权限列表"}}),n("my-common-bar",{attrs:{formDisplay:!1,newBtnText:"新增权限"},on:{new:e.addPermission}}),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"content"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"border"}},[n("el-table-column",{attrs:{align:"center",type:"index"}}),n("el-table-column",{attrs:{align:"center",label:"菜单名/权限名",prop:"title"}}),n("el-table-column",{attrs:{align:"center",label:"父级菜单",prop:"pid"}}),n("el-table-column",{attrs:{align:"center",label:"路由",prop:"route"}}),n("el-table-column",{attrs:{align:"center",label:"是否是菜单",prop:"is_menu"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(0===t.row.is_menu?"否":"是"))]}}])}),n("el-table-column",{attrs:{align:"center",label:"排序",prop:"orders"}}),n("el-table-column",{attrs:{align:"center",label:"ICON",prop:"icon"}}),n("el-table-column",{attrs:{align:"center",label:"操作",prop:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){e.edit(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"text"},on:{click:function(n){e.deletePermission(t.row)}}},[e._v("删除")])]}}])})],1)],1),n("div",{staticClass:"pager"},[n("el-pagination",{attrs:{layout:"total,slot,prev,pager,next","current-page":e.pagination.curPage,"page-size":e.pagination.pageSize,total:e.pagination.pageTotal},on:{"update:currentPage":function(t){e.$set(e.pagination,"curPage",t)},"current-change":e.pageCurPageChange,"size-change":e.pageSizeChange}})],1),n("my-permission-editor",{ref:"my-permission-editor",on:{"save-success":e.req}})],1)},staticRenderFns:[]},b=n("C7Lr")(f,v,!1,null,null,null);t.default=b.exports},BdUq:function(e,t){}});
//# sourceMappingURL=10.4ba1c77ed9e6d8768d75.js.map