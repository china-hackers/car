webpackJsonp([4],{"8x3R":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("5/aF"),r=a.n(n),o=a("Z34F"),i=a.n(o),s=a("1p1D"),l=a.n(s),c=a("T7Ta"),d=a.n(c),p={mixins:[a("Quz9").a],components:{},data:function(){return{form:{id:"",admin:"",pswd:"123456",role_id:"",sex:"男",name:"",phone:""},roleList:[]}},methods:{setDefaultValues:function(){var e=this;return i()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("edit"!==e.type){t.next=15;break}return t.prev=1,t.next=4,e.$http.post("/admin/admin/admin",{id:e.form.id});case 4:a=t.sent,(n=a.data).data.pswd="",d()(e.form,n.data),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:t.next=16;break;case 15:d()(e.form,{id:"",admin:"",pswd:"123456",role_id:"",sex:"男",name:"",phone:""});case 16:case"end":return t.stop()}},t,e,[[1,10]])}))()},getRoles:function(){var e=this;return i()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("/admin/role/list",{p:1});case 3:a=t.sent,n=a.data,e.roleList=n.data,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,e,[[0,8]])}))()},saveAdmin:function(){var e=this;return i()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"new"!==e.type){t.next=7;break}return t.next=4,e.$http.post("/admin/admin/add",l()({},e.form));case 4:e.success("添加成功"),t.next=12;break;case 7:return delete(a=d()({},e.form)).pswd,t.next=11,e.$http.post("/admin/admin/edit",l()({},a));case 11:e.success("修改成功");case 12:e.$emit("save-success"),e.close(),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.log(t.t0);case 19:case"end":return t.stop()}},t,e,[[0,16]])}))()}},mounted:function(){this.getRoles()}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.titleText+"管理员",visible:e.visible,width:"800px"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"comp-employee-editor"},[a("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:e.form.admin,callback:function(t){e.$set(e.form,"admin",t)},expression:"form.admin"}})],1),"new"===e.type?a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{model:{value:e.form.pswd,callback:function(t){e.$set(e.form,"pswd",t)},expression:"form.pswd"}})],1):e._e(),a("el-form-item",{attrs:{label:"真实姓名"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"角色"}},[a("el-select",{staticClass:"form-item-1",model:{value:e.form.role_id,callback:function(t){e.$set(e.form,"role_id",t)},expression:"form.role_id"}},e._l(e.roleList,function(e){return a("el-option",{key:e.id,attrs:{label:e.role,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[a("el-radio",{attrs:{label:"男"}},[e._v("男")]),a("el-radio",{attrs:{label:"女"}},[e._v("女")])],1)],1),a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{attrs:{type:"tel"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:""}},[a("my-button",{attrs:{click:e.saveAdmin}},[e._v("保存")])],1)],1)],1)])},staticRenderFns:[]};var m=a("7jd7")(p,u,!1,function(e){a("QrGG")},"data-v-6ca40e14",null).exports,f={mixins:[a("0wMN").a],data:function(){return{list:[],loading:!1}},components:{"my-admin-editor":m},methods:{addEmployee:function(){var e=this.$refs["my-admin-editor"];e.setEditorType("new"),e.open()},req:function(){var e=this;return i()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("/admin/admin/list",{p:e.pagination.curPage});case 3:a=t.sent,n=a.data,e.list=n.data.list,e.pagination.pageTotal=n.data.total,console.log(n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}},t,e,[[0,10]])}))()},deleteAdmin:function(e){var t=this;return i()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$http.post("/admin/admin/delete",{id:e.id});case 3:t.success("删除成功"),t.req(),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,t,[[0,7]])}))()},resetPswd:function(e){var t=this;return i()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$http.post("/admin/admin/reset",{id:e.id});case 3:t.success("设置成功"),t.req(),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}},a,t,[[0,7]])}))()},editAdmin:function(e){var t=this.$refs["my-admin-editor"];t.setId(e.id),t.open()}},mounted:function(){this.req()}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-permission-admin"},[a("my-page-title",{attrs:{title:"管理员列表"}}),a("div",{staticClass:"bar"},[a("el-form",{attrs:{inline:!0},nativeOn:{click:function(e){e.preventDefault()}}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入管理员姓名"}})],1),a("el-form-item",[a("my-button",{attrs:{type:"primary",loading:e.loading}},[e._v("搜索")])],1)],1),a("el-button",{attrs:{type:"primary"},on:{click:e.addEmployee}},[e._v("新增管理员")])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"border"}},[a("el-table-column",{attrs:{align:"center",type:"index"}}),a("el-table-column",{attrs:{align:"center",label:"用户名",prop:"admin"}}),a("el-table-column",{attrs:{align:"center",label:"真实名称",prop:"name"}}),a("el-table-column",{attrs:{align:"center",label:"角色",prop:"role_name"}}),a("el-table-column",{attrs:{align:"center",label:"性别",prop:"sex"}}),a("el-table-column",{attrs:{align:"center",label:"手机号码",prop:"phone"}}),a("el-table-column",{attrs:{align:"center",label:"操作",prop:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.editAdmin(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.resetPswd(t.row)}}},[e._v("重置密码")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.deleteAdmin(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pager"},[a("el-pagination",{attrs:{layout:"total,slot,prev,pager,next","current-page":e.pagination.curPage,"page-size":e.pagination.pageSize,total:e.pagination.pageTotal},on:{"update:currentPage":function(t){e.$set(e.pagination,"curPage",t)},"current-change":e.pageCurPageChange,"size-change":e.pageSizeChange}})],1)],1),a("my-admin-editor",{ref:"my-admin-editor",on:{"save-success":e.req}})],1)},staticRenderFns:[]};var b=a("7jd7")(f,v,!1,function(e){a("R8eo")},"data-v-57448f1e",null);t.default=b.exports},QrGG:function(e,t){},R8eo:function(e,t){}});
//# sourceMappingURL=4.8db4670927ada2b48751.js.map